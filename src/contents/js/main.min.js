var Sound=function(){this.soundList="contents/sounds/01.wav contents/sounds/02.wav contents/sounds/03.wav contents/sounds/04.wav contents/sounds/05.wav contents/sounds/06.wav contents/sounds/07.wav contents/sounds/08.wav contents/sounds/09.wav contents/sounds/10.wav contents/sounds/fue.wav contents/sounds/good.wav contents/sounds/bad.wav contents/sounds/next.wav contents/sounds/jump.wav contents/sounds/slide.wav".split(" ");this.sounds=[];for(var a=0;a<this.soundList.length;a++)this.sounds.push(new Audio(this.soundList[a]))};
Sound.prototype={play:function(a){this.sounds[a].play();this.sounds[a]=new Audio(this.soundList[a])}};Sound.FUE=10;Sound.GOOD=11;Sound.BAD=12;Sound.NEXT=13;Sound.JUMP=14;Sound.SLIDE=15;(function(a){a.fn.countDown=function(b,e){var k=10;return this.each(function(g){var f,h=this,m=function(){k-=1;n[k].fadeOut(500,function(){a(this).hide()});0<k?(e.play(k),r.html(""+k),setTimeout(function(){m()},1E3)):(e.play(Sound.FUE),r.hide(),q.show(),b())};a(this).css({width:300,height:300}).opacity(0.7);var r=a("\x3cdiv\x3e").appendTo(a(this)).css({zIndex:301,position:"absolute",top:50,left:0,width:300,height:200,textAlign:"center",fontFamily:"Osaka",fontSize:"200px",color:"333333",lineHeight:"200px",
textShadow:"-3px -3px 0 #fff, 3px -3px 0 #fff, -3px 3px 0 #fff, 3px 3px 0 #fff"}).html(""+k),q=a("\x3cdiv\x3e").appendTo(a(this)).css({zIndex:301,position:"absolute",top:115,left:0,width:300,height:70,textAlign:"center",fontFamily:"Osaka",fontSize:"70px",color:"#ff0000",textShadow:"-3px -3px 0 #fff, 3px -3px 0 #fff, -3px 3px 0 #fff, 3px 3px 0 #fff"}).html("TimeUp"),n=[];for(f=0;10>f;f++)g=9>f?"0"+(f+1):""+(f+1),g=a("\x3cdiv\x3e").appendTo(a(this)).css({zIndex:300,position:"absolute",top:0,left:0,
width:300,height:300,background:"url(contents/images/counter"+g+".png) no-repeat"}),n.push(g);this.reset=function(){k=10;r.html(""+k).show();for(f=0;10>f;f++)n[f].show();q.hide();a(h).hide()};this.start=function(){a(h).show();setTimeout(function(){m()},1E3)}})}})(jQuery);(function(a){a.fn.siteDescriptionSlide=function(b,e,k){var g=0,f=[],h=!1,m=!0;return this.each(function(r){var q=this,n=function(){if(!1==m)if(g+1<f.length)s(g+1);else e.onFinishExplanation()},s=function(l){var t=!1;k.play(Sound.SLIDE);m=!0;p.hide();for(var c=0;c<b.pages[l].items.length;c++)switch(b.pages[l].items[c].type){case "counter":b.pages[l].items[c].obj[0].reset();b.pages[l].items[c].obj[0].start();t=!0;break;case "sound":var d=b.pages[l].items[c].number;setTimeout(function(){k.play(d)},b.pages[l].items[c].delay)}g!=
l&&f[g].animate({left:-a(q).width(),visibility:"hidden",opacity:0},750);f[l].css({visibility:h?"visible":"hidden",left:a(q).width(),opacity:0}).animate({left:0,visibility:h?"visible":"hidden",opacity:1},750);g=l;e.onChangeExplanationPage(l);!1==t&&setTimeout(function(){m=!1;p.show()},Template.explanation.wait)};a(this).css({position:"relative",display:"block",overflow:"hidden",zIndex:50});var p=a("\x3cdiv\x3e").css({position:"fixed",width:80,height:80,right:"10%",bottom:"10%",background:"url(contents/images/next_button.png) no-repeat 0 0",
zIndex:120}).hover(function(){p.opacity(1)},function(){p.opacity(0.7)}).opacity(0.7).click(function(){n()}).appendTo(a(this)).hide(),u=a("\x3cdiv\x3e").css({position:"fixed",display:"inline-block",width:"100%",height:"100%",left:0,top:0}).appendTo(a(this));this.setVisibility=function(b){(h=b)?(s(0),a(window).on("keydown",function(a){32==a.keyCode&&h&&n()})):(a(window).off("keydown"),f[g].css({visibility:"hidden"}),m=!0,p.hide())};(function(){for(var e=0;e<b.pages.length;e++){for(var g=a("\x3cdiv\x3e").css({position:"absolute",
display:"block",visibility:"hidden",width:"100%",height:"100%"}).appendTo(u),c=b.pages[e].items,d=0;d<c.length;d++)if("sound"!=c[d].type){var h;switch(c[d].type){case "text":h=a("\x3cdiv\x3e").css({zIndex:110,position:"absolute",left:c[d].pos[0],top:c[d].pos[1],width:c[d].pos[2],height:c[d].pos[3],fontSize:"50px",color:Template.explanation.color}).html(c[d].text);break;case "image":h=a("\x3cdiv\x3e").css({zIndex:110,position:"absolute",left:c[d].pos[0],top:c[d].pos[1],width:c[d].pos[2],height:c[d].pos[3],
background:"url("+c[d].image+") no-repeat 0 0"});break;case "counter":h=a("\x3cdiv\x3e").css({position:"absolute",left:c[d].pos[0],top:c[d].pos[1],width:c[d].pos[2],height:c[d].pos[3],zIndex:110}).countDown(function(){m=!1;p.show()},k)}c[d]["class"]&&h.attr({"class":c[d]["class"]});g.append(h);c[d].obj=h}f.push(g)}})()})}})(jQuery);var Explanation=function(a,b){this.contents={title:"\u8aac\u660e",pages:[{title:"\u8aac\u660e1",items:[{type:"text",pos:["15%","15%","70%",200],text:"\u554f\u984c\u306f\u25ef\u2715\u30af\u30a4\u30ba\u3067\u3059\u3002\u982d\u306e\u4e0a\u3067\u25ef\u304b\u2715\u3092\u51fa\u3057\u3066\u7b54\u3048\u3066\u304f\u3060\u3055\u3044\u3002","class":"slideDescription"},{type:"image",pos:["20%","30%",400,600],image:"template/goodman.png"},{type:"image",pos:["50%","30%",400,600],image:"template/badman.png"}]},
{title:"\u8aac\u660e2",items:[{type:"text",pos:["15%","15%","70%",200],text:"\u554f\u984c\u306e\u5236\u9650\u6642\u9593\u306f10\u79d2\u3067\u3059\u3002\u554f\u984c\u3092\u8aad\u307f\u7d42\u3048\u308b\u3068\u30ab\u30a6\u30f3\u30c8\u30c0\u30a6\u30f3\u3092\u59cb\u3081\u307e\u3059\u3002","class":"slideDescription"},{type:"counter",pos:["40%","40%",300,300]}]},{title:"\u8aac\u660e3",items:[{type:"text",pos:["15%","15%","70%",200],text:"\u554f\u984c\u306e\u7b54\u3048\u306f\u96a3\u306e\u4eba\u3068\u306f\u76f8\u8ac7\u305b\u305a\u3001\u81ea\u5206\u3067\u8003\u3048\u3066\u4e0b\u3055\u3044\u3002",
"class":"slideDescription"},{type:"image",pos:["20%","30%",400,600],image:"template/earman.png"},{type:"image",pos:["50%","25%",400,600],image:"template/chatman.png"},{type:"image",pos:["30%","50%",600,200],image:"template/bad.png"},{type:"sound",number:Sound.BAD,delay:500}]},{title:"\u8aac\u660e4",items:[{type:"text",pos:["15%","15%","70%",200],text:"\u305d\u308c\u3067\u306f\u30af\u30a4\u30ba\u3092\u59cb\u3081\u307e\u3059\u3002\u7686\u3055\u3093\u5fa1\u8d77\u7acb\u304a\u9858\u3044\u3057\u307e\u3059\u3002\u9593\u9055\u3048\u305f\u4eba\u306f\u7740\u5e2d\u3057\u3066\u304f\u3060\u3055\u3044\u3002",
"class":"slideDescription"}]}]};this.slide=$("\x3cdiv\x3e").appendTo($("#site_box")).css({zIndex:100,background:"url(template/backexp.png) no-repeat fixed"}).fullScreen().siteDescriptionSlide(this.contents,a,b).hide()};Explanation.prototype={show:function(){this.slide[0].setVisibility(!0);this.slide.show()},hide:function(){this.slide.hide();this.slide[0].setVisibility(!1)}};var Quiz=function(a,b){var e=this;this.status=STATUS.QUIZ_QUESTION;this.quizNumber=0;this.handler=a;this.sound=b;this.disableNext=!0;this.base=$("\x3cdiv\x3e").appendTo($("#site_box")).css({zIndex:200,background:"url(template/backexp.png) no-repeat fixed"}).fullScreen().hide();this.nextButton=$("\x3cdiv\x3e").appendTo(this.base).css({zIndex:300,position:"fixed",width:80,height:80,right:"5%",bottom:"10%",background:"url(contents/images/next_button.png) no-repeat 0 0"}).hover(function(){e.nextButton.opacity(1)},
function(){e.nextButton.opacity(0.7)}).opacity(0.7).click(function(){e.onNext()}).hide();this.question=$("\x3cdiv\x3e").appendTo(this.base).css({zIndex:210,width:"100%",height:"100%"}).hide();this.quiz=$("\x3cdiv\x3e").appendTo(this.question).css({zIndex:211,position:"absolute",left:"10%",top:"15%",width:"80%",height:"70%",fontSize:"80px",lineHeight:"80px",color:Template.quiz.color});this.counter=$("\x3cdiv\x3e").appendTo(this.question).css({zIndex:212,position:"absolute",bottom:"20%",right:"5%"}).countDown(function(){e.onFinishCountdown()},
b);this.counted=$("\x3cdiv\x3e").appendTo(this.base).css({zIndex:220,width:"100%",height:"100%"}).hide();this.countedMessage=$("\x3cdiv\x3e").appendTo(this.counted).css({zIndex:221,position:"absolute",top:"40%",left:"10%",width:"80%",height:"20%",textAlign:"center",align:"center",fontSize:"100px",lineHeight:"100px",color:Template.quiz.color}).html("\u6b63\u89e3\u306f\uff01\uff01");this.answer=$("\x3cdiv\x3e").appendTo(this.base).css({zIndex:230,width:"100%",height:"100%"}).hide();this.answerMessage=
$("\x3cdiv\x3e").appendTo(this.answer).css({zIndex:231,position:"absolute",top:"10%",left:"10%",width:"80%",height:"40%",textAlign:"center",align:"center",fontSize:"400px",lineHeight:"400px",fontWeight:"bold",color:"#ff0000"}).html("\u25ef");this.answerComment=$("\x3cdiv\x3e").appendTo(this.answer).css({zIndex:232,position:"absolute",bottom:"15%",left:"10%",width:"80%",height:"10%",textAlign:"center",align:"center",fontSize:"80px",lineHeight:"80px",color:Template.quiz.color});this.next=$("\x3cdiv\x3e").appendTo(this.base).css({zIndex:240,
width:"100%",height:"100%"}).hide();this.nextMessage=$("\x3cdiv\x3e").appendTo(this.next).css({zIndex:241,position:"absolute",top:"40%",left:"10%",width:"80%",height:"20%",textAlign:"center",align:"center",fontSize:"100px",lineHeight:"100px",color:Template.quiz.color}).html("\u6b21\u306e\u554f\u984c\uff01");this.returnButton=$("\x3cdiv\x3e").appendTo(this.next).css({zIndex:242,position:"fixed",width:80,height:80,right:"5%",bottom:"10%",background:"url(contents/images/return_button.png) no-repeat 0 0"}).hover(function(){e.returnButton.opacity(1)},
function(){e.returnButton.opacity(0.7)}).opacity(0.7).click(function(){e.handler.onFinishQuiz()}).hide()};
Quiz.prototype={show:function(){var a=this;this.base.show();$(window).on("keydown",function(b){a.onKeyDown(b)})},hide:function(){$(window).off("keydown");this.base.hide()},onKeyDown:function(a){if(32==a.keyCode)this.onNext()},onNext:function(){var a=this,b=!1;if(!this.disableNext){this.disableNext=!0;this.nextButton.hide();switch(this.status){case STATUS.QUIZ_QUESTION:this.status=STATUS.QUIZ_COUNTDOWN;this.handler.onChangeQuizState(this.quizNumber,this.status);this.counter[0].start();return;case STATUS.QUIZ_COUNTDOWN:return;
case STATUS.QUIZ_TIMEOUT:this.status=STATUS.QUIZ_BEFORE_ANSWER;this.handler.onChangeQuizState(this.quizNumber,this.status);this.question.hide();this.counted.show();this.sound.play(9);break;case STATUS.QUIZ_BEFORE_ANSWER:this.status=STATUS.QUIZ_ANSWER;this.handler.onChangeQuizState(this.quizNumber,this.status);this.counted.hide();0==QuizList[this.quizNumber].a?(this.answerMessage.css({color:"#ff0000"}).html("\u25ef"),this.sound.play(Sound.GOOD)):(this.answerMessage.css({color:"#0000ff"}).html("\u2715"),
this.sound.play(Sound.BAD));this.answerComment.html(QuizList[this.quizNumber].comment);this.answer.show();break;case STATUS.QUIZ_ANSWER:this.status=STATUS.QUIZ_NEXT;this.handler.onChangeQuizState(this.quizNumber,this.status);this.returnButton.hide();this.quizNumber+1==QuizList.length-1?this.nextMessage.html("\u6700\u5f8c\u306e\u554f\u984c\uff01\uff01"):this.quizNumber+1==QuizList.length?(this.nextMessage.html("\u304a\u3057\u307e\u3044"),this.returnButton.show(),b=!0):this.nextMessage.html("\u6b21\u306e\u554f\u984c\uff01");
this.answer.hide();this.next.show();this.sound.play(Sound.NEXT);break;case STATUS.QUIZ_NEXT:this.doQuestion(this.quizNumber+1,STATUS.QUIZ_QUESTION)}!1==b&&setTimeout(function(){a.disableNext=!1;a.nextButton.show()},Template.quiz.wait)}},doQuestion:function(a,b){var e=this;this.counted.hide();this.answer.hide();this.question.hide();if(a<QuizList.length)switch(this.next.hide(),b){case STATUS.INIT:case STATUS.EXPLAIN:case STATUS.EXPLAIN_FINISHED:case STATUS.QUIZ_QUESTION:case STATUS.QUIZ_COUNTDOWN:this.status=
STATUS.QUIZ_QUESTION;this.quizNumber=a;this.handler.onChangeQuizState(this.quizNumber,this.status);this.quiz.html(QuizList[this.quizNumber].q);this.quiz.show();this.counter[0].reset();this.question.show();this.sound.play(Sound.SLIDE);this.disableNext=!0;this.nextButton.hide();setTimeout(function(){e.disableNext=!1;e.nextButton.show()},Template.quiz.wait);break;case STATUS.QUIZ_TIMEOUT:case STATUS.QUIZ_BEFORE_ANSWER:this.status=STATUS.QUIZ_TIMEOUT;this.quizNumber=a;this.disableNext=!1;this.nextButton.hide();
this.onNext();break;case STATUS.QUIZ_ANSWER:case STATUS.QUIZ_NEXT:this.status=STATUS.QUIZ_NEXT,this.quizNumber=a,this.disableNext=!1,this.nextButton.hide(),this.onNext()}else this.status=STATUS.QUIZ_NEXT,this.quizNumber=a,this.handler.onChangeQuizState(this.quizNumber,this.status),this.disableNext=!0,this.nextButton.hide(),this.nextMessage.html("\u304a\u3057\u307e\u3044"),this.next.show(),this.returnButton.show()},onFinishCountdown:function(){this.status=STATUS.QUIZ_TIMEOUT;this.handler.onChangeQuizState(this.quizNumber,
this.status);this.quiz.fadeOut(500);this.disableNext=!1;this.nextButton.show()}};var STATUS={INIT:0,EXPLAIN:1,EXPLAIN_FINISHED:2,QUIZ_QUESTION:3,QUIZ_COUNTDOWN:4,QUIZ_TIMEOUT:5,QUIZ_BEFORE_ANSWER:6,QUIZ_ANSWER:7,QUIZ_NEXT:8};
(function(){window.addEventListener("load",function(){var a=this;a.vars={state:STATUS.INIT,explanationPage:0,quizNumber:0};a.objs={top:null,explanation:null,quiz:null,sound:null,button:{explanation:null,start:null,reset:null}};a.handlers={onClickExplanation:function(){a.vars.state=STATUS.EXPLAIN;a.funcs.saveVars();a.funcs.hide();a.objs.explanation.show()},onChangeExplanationPage:function(b){a.vars.explanationPage=b;a.funcs.saveVars()},onFinishExplanation:function(){a.vars.state=STATUS.EXPLAIN_FINISHED;
a.funcs.saveVars();a.objs.explanation.hide();a.funcs.show()},onClickStart:function(){a.funcs.hide();a.objs.quiz.show();a.objs.quiz.doQuestion(a.vars.quizNumber,a.vars.state)},onChangeQuizState:function(b,e){a.vars.state=e;a.vars.quizNumber=b;a.funcs.saveVars()},onClickReset:function(){!0==confirm("\u6700\u521d\u304b\u3089\u59cb\u3081\u307e\u3059\u304b\uff1f")&&(a.vars.quizNumber=0,a.vars.explanationPage=0,a.vars.state=STATUS.INIT,a.handlers.onClickStart())},onFinishQuiz:function(){a.objs.quiz.hide();
a.objs.button.start.hide();a.funcs.show()}};a.funcs={init:function(){a.objs.top=$("\x3cdiv\x3e").appendTo($("#site_box")).css({zIndex:0,background:"url(template/background.png) no-repeat fixed"}).fullScreen();$("\x3cdiv\x3e").appendTo(a.objs.top).css({zIndex:10,position:"fixed",left:"10%",top:"15%",width:"80%",height:100,textAlign:"center",fontSize:"100px",lineHeight:"100px",color:Template.top.titleColor}).html(Template.top.title);$("\x3cdiv\x3e").appendTo(a.objs.top).css({zIndex:11,position:"fixed",
bottom:"50%",right:"5%",width:"35%",height:80,fontSize:"80px",lineHeight:"80px",color:Template.top.titleColor}).html("\u25ef\u2715\u30af\u30a4\u30ba");a.objs.button.explanation=$("\x3ca\x3e").appendTo(a.objs.top).css({zIndex:10}).makeButton({text:"\u30eb\u30fc\u30eb\u8aac\u660e",pos:["20%","65%",200,60],color:Template.top.buttonColor}).on("click",function(){a.handlers.onClickExplanation()});var b=0!=a.vars.quizNumber||a.vars.state>=STATUS.QUIZ_TIMEOUT;a.objs.button.start=$("\x3ca\x3e").appendTo(a.objs.top).css({zIndex:10}).makeButton({text:b?
"\u30af\u30a4\u30ba\u518d\u958b":"\u30af\u30a4\u30ba\u30b9\u30bf\u30fc\u30c8",pos:b?["45%","65%",200,60]:["70%","65%",200,60],color:Template.top.buttonColor}).on("click",function(){a.handlers.onClickStart()});a.objs.button.reset=$("\x3ca\x3e").css({zIndex:10}).makeButton({text:"\u6700\u521d\u304b\u3089\u59cb\u3081\u308b",pos:["70%","65%",200,60],color:Template.top.buttonColor}).on("click",function(){a.handlers.onClickReset()});b||a.objs.button.reset.hide();a.objs.button.reset.appendTo(a.objs.top);
a.objs.sound=new Sound;a.objs.explanation=new Explanation(a.handlers,a.objs.sound);a.objs.quiz=new Quiz(a.handlers,a.objs.sound)},show:function(){a.objs.top.show()},hide:function(){a.objs.top.hide()},restoreVars:function(){a.vars=$.extend(!0,{},a.vars,JSON.parse(localStorage.getItem("QUIZ_COUNTDOWN_VARS")))},saveVars:function(){localStorage.setItem("QUIZ_COUNTDOWN_VARS",JSON.stringify(a.vars))}};a.funcs.restoreVars();a.funcs.init()},!1)})();